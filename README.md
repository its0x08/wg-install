# wg-install v20211222-4
WireGuard autoinstaller written in Bash

[WireGuard](https://www.wireguard.com) [road warrior](http://en.wikipedia.org/wiki/Road_warrior_%28computing%29) installer for Ubuntu, Debian, CentOS and Fedora!

This script will install automatically the Wireguard server and generate client configuration files for a secure connection.

Note: If you try to run this on a new AWS EC2 instance it will fail. To make it work you have to create the VM without a public IP at first and then add a new Elastic IP later, [see this guide](https://habr.com/en/post/449234/).

## Usage command

### Oneliner

`wget https://raw.githubusercontent.com/besmirzanaj/wg-install/master/wg-install.sh -qO wg.sh && bash wg.sh`

### Steps to download and run the scripts:

```bash
git clone https://github.com/besmirzanaj/wg-install.git
cd wg-install
bash wg-install.sh
```

Initial run will also generate a barcode so you can scan with your phone, [android](https://play.google.com/store/apps/details?id=com.wireguard.android), [apple](https://apps.apple.com/us/app/wireguard/id1441195209).

### Steps to remove the VPN tunnel and kernel changes

If you are not satisfied and want to remove the VPN tunnel and kernel changes run the other script:

```bash
bash wg-remove.sh
```

## Add new client

Each subsequent time you run the script after the first initial install, it will now generate more users after the first run. 

## To start/activate the Wireguard client manually

`wg-quick up wg0`

## Options

The script can be configured by setting the following environment variables:

* INTERACTIVE - if set to "no", the script will not prompt for user input
* PRIVATE\_SUBNET - private subnet configuration, "10.9.0.0/24" by default
* SERVER\_HOST - public IP address, detected by default
* SERVER\_PORT - listening port, picked random by default
* CLIENT\_DNS - comma serparated DNS servers to use by the client

Copy the file `/root/client-wg0.conf` from a remote server to your local PC
path (e.g. in Ubuntu: `/etc/wireguard/wg0.conf` ) and run `sudo systemctl start wg-quick@wg0.service` or
you can use the QR code generated by this script to auto-add mobile clients.

you can also `cat` the content of the file and add into your Windows [Wireguard client](https://www.wireguard.com/install/#windows-7-81-10-11-2008r2-2012r2-2016-2019-2022).

## Server/Client status

To check VPN status, run `wg` on the server
